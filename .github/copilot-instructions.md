# Copilot è‡ªå®šç¾©æŒ‡ä»¤

> **ğŸ“‹ å®Œæ•´æŒ‡å¼•è«‹åƒè¦‹ [AGENTS.md](../AGENTS.md)**

æ­¤æ–‡ä»¶ç‚ºç°¡åŒ–ç‰ˆï¼Œå®Œæ•´çš„ Agent æŒ‡å¼•ä½æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„ã€‚

## ğŸ›ï¸ é‹è¡Œæ¨¡å¼

**åœ¨é–‹å§‹æ“ä½œå‰ï¼Œå…ˆæª¢æŸ¥ `.copilot-mode.json` çš„ `mode` å€¼ï¼**

| æ¨¡å¼ | èªªæ˜ | æª”æ¡ˆä¿è­· |
|------|------|----------|
| `development` | é–‹ç™¼æ¨¡å¼ - å•Ÿç”¨æ‰€æœ‰æŠ€èƒ½å’Œéœæ…‹åˆ†æ | âŒ ç„¡ |
| `normal` | ä¸€èˆ¬æ¨¡å¼ - åƒ…ç ”ç©¶æŠ€èƒ½ | âœ… å—ä¿è­· |
| `research` | ç ”ç©¶æ¨¡å¼ - å°ˆæ³¨è«–æ–‡å¯«ä½œ | âœ… å—ä¿è­· |

**åˆ‡æ›æ–¹å¼**ï¼šç”¨æˆ¶èªªã€Œé–‹ç™¼æ¨¡å¼ã€/ã€Œä¸€èˆ¬æ¨¡å¼ã€/ã€Œç ”ç©¶æ¨¡å¼ã€æ™‚ï¼Œä¿®æ”¹ `.copilot-mode.json`

### ğŸ”’ æª”æ¡ˆä¿è­·ï¼ˆNormal/Research æ¨¡å¼ï¼‰

**å—ä¿è­·è·¯å¾‘ï¼ˆå”¯è®€ï¼‰**ï¼š
- `.claude/` - Skills å®šç¾©
- `.github/` - Copilot æŒ‡ä»¤
- `src/` - åŸå§‹ç¢¼
- `tests/` - æ¸¬è©¦
- `integrations/` - MCP æ•´åˆ
- `AGENTS.md`, `CONSTITUTION.md`, `pyproject.toml`

**å¯ä¿®æ”¹è·¯å¾‘**ï¼š
- `projects/` - ç ”ç©¶å°ˆæ¡ˆ
- `docs/` - æ–‡ä»¶

**ç”¨æˆ¶è¦ä¿®æ”¹å—ä¿è­·æª”æ¡ˆæ™‚**ï¼š
```
âš ï¸ ç›®å‰æ˜¯ [normal/research] æ¨¡å¼ï¼Œé€™å€‹æª”æ¡ˆå—ä¿è­·ã€‚
è«‹èªªã€Œé–‹ç™¼æ¨¡å¼ã€åˆ‡æ›å¾Œå†ä¿®æ”¹ã€‚
```

## å¿«é€Ÿåƒè€ƒ

### æ³•è¦å±¤ç´š
1. **æ†²æ³•**ï¼š`CONSTITUTION.md`
2. **å­æ³•**ï¼š`.github/bylaws/*.md`
3. **æŠ€èƒ½**ï¼š`.claude/skills/*/SKILL.md`

### æ ¸å¿ƒåŸå‰‡
- **DDD æ¶æ§‹**ï¼šDomain-Driven Design
- **MCP-to-MCP é€šè¨Š**ï¼šå„²å­˜æ–‡ç»ç”¨ `save_reference_mcp(pmid)`ï¼Œä¸æ˜¯å‚³ metadata
- **Memory Bank**ï¼š`memory-bank/` å¼·åˆ¶åŒæ­¥
- **Workspace State**ï¼šæ–°å°è©±é–‹å§‹å‘¼å« `get_workspace_state()` æ¢å¾© context
- **Python ç’°å¢ƒ**ï¼šuv å„ªå…ˆã€ç¦æ­¢å…¨åŸŸå®‰è£

### â­ Workspace State è¦å‰‡ï¼ˆæ–°ï¼ï¼‰

```
ğŸ“Œ è§£æ±º Agent è¢« Summarize å¾Œéºå¤± Context çš„å•é¡Œ

ğŸ”µ æ–°å°è©±é–‹å§‹ï¼š
   â†’ å‘¼å« get_workspace_state() æ¢å¾© context

ğŸ”µ é‡è¦æ“ä½œå‰/å¾Œï¼š
   â†’ å‘¼å« sync_workspace_state(doing="...", next_action="...")

ğŸ”µ ç‹€æ…‹æª”æ¡ˆï¼š.mdpaper-state.jsonï¼ˆå”¯ä¸€çœŸç›¸ä¾†æºï¼‰
```

### âš ï¸ å„²å­˜æ–‡ç»è¦å‰‡

```
âœ… æ­£ç¢ºï¼šsave_reference_mcp(pmid="12345678", agent_notes="...")
   â†’ mdpaper ç›´æ¥å¾ pubmed-search API å–å¾—é©—è­‰è³‡æ–™

âŒ éŒ¯èª¤ï¼šsave_reference(article={å¾ search æ‹¿åˆ°çš„å®Œæ•´ metadata})
   â†’ Agent å¯èƒ½ä¿®æ”¹/å¹»è¦ºæ›¸ç›®è³‡æ–™ï¼ˆåƒ…ç•¶ API ä¸å¯ç”¨æ™‚ fallbackï¼‰
```

### âš ï¸ è‰ç¨¿ç·¨è¼¯å¼•ç”¨è¦å‰‡

```
ğŸ“Œ æ ¸å¿ƒï¼šä¿®æ”¹è‰ç¨¿ä¸­çš„å¼•ç”¨å¿…é ˆç¶“éé©—è­‰ç®¡ç·šï¼

âœ… æ­£ç¢ºåšæ³•ï¼š
   1. get_available_citations() â†’ å–å¾—å¯ç”¨çš„ [[citation_key]] æ¸…å–®
   2. patch_draft(filename, old_text, new_text) â†’ éƒ¨åˆ†ç·¨è¼¯ + wikilink é©—è­‰
   3. sync_references(filename) â†’ ç”Ÿæˆ References section

âŒ éŒ¯èª¤åšæ³•ï¼š
   1. ç›´æ¥ç”¨ replace_string_in_file ä¿®æ”¹è‰ç¨¿ä¸­çš„å¼•ç”¨
   2. ä¸æŸ¥å¯ç”¨ citations å°±æ†‘è¨˜æ†¶æ’å…¥ wikilinks
   3. æ··ç”¨ [1] æ•¸å­—å¼•ç”¨å’Œ [[wikilink]] æ ¼å¼
```

### âš ï¸ Novelty Check è¦å‰‡ï¼ˆçŠ€åˆ©å›é¥‹æ¨¡å¼ï¼ï¼‰

```
ğŸ“Œ æ ¸å¿ƒï¼šåƒé ‚å°– Reviewer ä¸€æ¨£çŠ€åˆ©ï¼Œä½†çµ¦é¸é …ï¼

âœ… æ­£ç¢ºåšæ³•ï¼š
   1. ç›´æŒ‡å•é¡Œï¼šã€Œæ‚¨è²ç¨±ã€é¦–æ¬¡ã€ï¼Œä½†æ²’æœ‰æœå°‹è­‰æ“šã€
   2. æå‡º Reviewer æœƒå•çš„å•é¡Œ
   3. çµ¦å…·é«”ä¿®å¾©æ–¹æ¡ˆï¼ˆä¸æ˜¯ã€Œå¯ä»¥è€ƒæ…®ã€ï¼‰
   4. ä¸»å‹•å•ï¼šã€Œç›´æ¥å¯«ï¼Ÿä¿®æ­£å•é¡Œï¼Ÿç”¨ CGUï¼Ÿã€
   5. ç”¨æˆ¶æ±ºå®šå¾Œç«‹å³åŸ·è¡Œ

âŒ éŒ¯èª¤åšæ³•ï¼š
   1. è¨å¥½å¼å›é¥‹ã€Œæ‚¨çš„ concept å¾ˆå¥½å–”ï½ã€
   2. è‡ªå‹•é–‹å§‹ä¿®æ”¹ NOVELTY STATEMENT
   3. åè¦†ä¿®æ”¹è¿½åˆ†æ•¸
   4. è¶Šæ”¹è¶Šç³Ÿé‚„ç¹¼çºŒæ”¹
```

**CGU å‰µæ„å·¥å…·**ï¼šä¸»å‹•å•ç”¨æˆ¶è¦ä¸è¦ç”¨ CGU å¹«å¿™
- `deep_think` - å¾ reviewer è§’åº¦æ‰¾å¼±é»
- `spark_collision` - ç¢°æ’ç¾æœ‰é™åˆ¶èˆ‡æˆ‘çš„å„ªå‹¢
- `generate_ideas` - ç™¼æƒ³ç„¡å¯è¾¯é§çš„ novelty

### ğŸ”” é›™é‡ Hook æ¶æ§‹

```
â”Œâ”€â”€â”€ Copilot Hooks â”€â”€â”€â”  â”Œâ”€â”€â”€ Pre-Commit Hooks â”€â”€â”€â”
â”‚ å¯«ä½œæ™‚å³æ™‚è§¸ç™¼       â”‚  â”‚ git commit å‰è§¸ç™¼       â”‚
â”‚ auto-paper/SKILL.md  â”‚  â”‚ git-precommit/SKILL.md  â”‚
â”‚ é‚Šå¯«é‚ŠæŸ¥ï¼ˆç´°ç¯€ï¼‰     â”‚  â”‚ å…¨å±€ç¸½æª¢æŸ¥ï¼ˆä¸€è‡´æ€§ï¼‰   â”‚
â”‚ è‡ªå‹•ä¿®æ­£             â”‚  â”‚ åªå ±å‘Šï¼Œç”¨æˆ¶æ±ºå®š       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Hook é¡å‹ | Hooks | ä½¿ç”¨çš„ MCP Tools |
|-----------|-------|------------------|
| **Copilot A** (post-write) | å­—æ•¸ã€å¼•ç”¨å¯†åº¦ã€Anti-AIã€Wikilink | `count_words`, `get_available_citations`, `validate_wikilinks`, `patch_draft` |
| **Copilot B** (post-section) | æ¦‚å¿µä¸€è‡´ã€ğŸ”’ ä¿è­·å…§å®¹ | `read_draft`, `patch_draft` |
| **Copilot C** (post-manuscript) | å…¨ç¨¿ä¸€è‡´æ€§ã€æŠ•ç¨¿æ¸…å–® | `check_manuscript_consistency`, `scan_draft_citations`, `count_words` |
| **Copilot D** (meta-learning) | SKILL è‡ªæˆ‘æ”¹é€² | `read_file`, `replace_string_in_file` |
| **Pre-Commit P1-P7** | å¼•ç”¨å®Œæ•´ã€Anti-AIã€æ¦‚å¿µã€å­—æ•¸ã€ğŸ”’ã€.memoryã€æ–‡ç» | `scan_draft_citations`, `read_draft`, `count_words`, `list_saved_references` |

**äº’è£œé—œä¿‚**ï¼šCopilot Hooks åœ¨å¯«ä½œæ™‚å³æ™‚ä¿®æ­£ï¼ŒPre-Commit Hooks æ˜¯æœ€çµ‚ safety netã€‚

**Skill èˆ‡ Hook çš„å±¤ç´š**ï¼š
```
Capability (é«˜å±¤ç·¨æ’) â†’ Skill (æŠ€èƒ½çŸ¥è­˜) â†’ Hook (å“è³ªå¯©è¨ˆ) â†’ MCP Tool (åº•å±¤æ“ä½œ)
```

### å›æ‡‰é¢¨æ ¼
- ç¹é«”ä¸­æ–‡
- æ¸…æ™°æ­¥é©Ÿ
- å¼•ç”¨æ³•è¦
